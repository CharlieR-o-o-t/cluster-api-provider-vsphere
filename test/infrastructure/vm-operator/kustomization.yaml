apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

commonLabels:
  # vm-operator is not a CAPI provider, but by adding this label
  # we can get this installed by Cluster APIs Tiltfile.
  cluster.x-k8s.io/provider: "runtime-extension-vm-operator"

resources:
- vm-operator.yaml

patchesStrategicMerge:
- vm-operator-replicas.yaml

patches:
- target:
    labelSelector: app=web-console-validator
  patch: |
    $patch: delete
    kind: Deployment
    metadata:
      name: web-console-validator
